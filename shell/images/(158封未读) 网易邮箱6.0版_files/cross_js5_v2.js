(function(){var __postMessage,__addMsgListener,__reghost=/^([\w]+:\/\/.*?)(?=\/|$)/,__regdomain=/^(?:[\w]+\:\/\/)?(.*?)(?:\/|$)/i;window.P=function(_namespace){if(!_namespace||!_namespace.length){return null}var _package=window;for(var a=_namespace.split("."),l=a.length,i=a[0]=="window"?1:0;i<l;_package=_package[a[i]]=_package[a[i]]||{},i++){}return _package};var __userAgent=window.navigator.userAgent;P("B");B._$ISIE=/msie\s+(.*?)\;/i.test(__userAgent);B._$ISFF=!B._$ISIE&&/rv\:(.*?)\)\s+gecko\//i.test(__userAgent);B._$ISOP=!B._$ISIE&&!B._$ISFF&&/opera\/(.*?)\s/i.test(__userAgent);B._$ISSF=!B._$ISIE&&!B._$ISFF&&!B._$ISOP&&/applewebkit\/(.*?)\s/i.test(__userAgent);B._$ISKQ=!B._$ISIE&&!B._$ISFF&&!B._$ISOP&&!B._$ISSF&&/konqueror\/(.*?)\;/i.test(__userAgent);B._$VERSION=RegExp.$1;B._$ISOLDIE=B._$ISIE&&B._$VERSION<"7.0";if(B._$ISIE){try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}}var __trim=/(?:^\s+)|(?:\s+$)/g,__empty=/^\s*$/,__remap={a:{r:/\<|\>|\&|\n|\s|\'|\"/g,"<":"&lt;",">":"&gt;","&":"&amp;"," ":"&nbsp;",'"':"&quot;","'":"&#39;","\n":"<br/>"},b:{r:/\&(?:lt|gt|amp|nbsp|#39|quot)\;/gi,"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" ","&#39;":"'","&quot;":'"'},c:{i:true,r:/\byyyy|yy|MM|M|dd|d|HH|H|mm|ms|ss|m|s\b/g},d:{r:/\'|\"/g,"'":"\\'",'"':'\\"'}};P("U");U._$trim=function(_content){return !!_content&&!!_content.replace&&_content.replace(__trim,"")||""};U._$encode=function(_map,_content){if(!_map||!_content||!_content.replace){return _content||""}return _content.replace(_map.r,function($1){return _map[!_map.i?$1.toLowerCase():$1]||$1})};U._$escape=function(_content){return U._$encode(__remap.a,_content)};U._$unescape=function(_content){return U._$encode(__remap.b,_content)};U._$isType=function(_data,_type){return Object.prototype.toString.call(_data).toLowerCase()=="[object "+_type.toLowerCase()+"]"};U._$string=function(_content){return U._$encode(__remap.d,_content)};U._$serialize=function(_data){if(U._$isType(_data,"number")){return _data}if(U._$isType(_data,"date")){return _data.getTime()}if(U._$isType(_data,"boolean")){return !!_data?"true":"false"}if(U._$isType(_data,"string")){return"'"+U._$string(_data)+"'"}if(!_data){return"null"}if(U._$isType(_data,"array")){var _arr=[];for(var i=0,l=_data.length;i<l;_arr.push(U._$serialize(_data[i])),i++){}return"["+_arr.join(",")+"]"}if(U._$isType(_data,"object")){var _arr=[];for(var p in _data){_arr.push(U._$serialize(p)+":"+U._$serialize(_data[p]))}return"{"+_arr.join(",")+"}"}return"null"};U._$deserialize=function(_content){try{return !_content?null:eval("("+_content+")")}catch(e){return null}};P("E");E._$getElement=function(_element){if(arguments.length<=1){return U._$isType(_element,"string")||U._$isType(_element,"number")?document.getElementById(_element):_element}var _result=[];for(var i=0,l=arguments.length;i<l;_result.push(E._$getElement(arguments[i])),i++){}return _result};P("V");var __events={};var __cacheEvent=function(_element,_type,_handler){if(_element==window||_element==document||_element==top||_element==parent){return}var _sn=_element[__akey];_sn?__cacheEventWithCached(_sn,_type,_handler):__cacheEventWithoutCached(_element,_type,_handler)};var __isOnReadyStateChange=function(_element,_type){if(!B._$ISIE||_element==window||_element==document||_type!="load"){return false}var _tag=_element.tagName.toLowerCase();return _tag=="iframe"||_tag=="script"};var __addEvent,__delEvent;if(!!document.addEventListener){__addEvent=function(_element,_type,_handler,_capture){_element.addEventListener(_type,_handler,!!_capture)};__delEvent=function(_element,_type,_handler,_capture){_element.removeEventListener(_type,_handler,!!_capture)}}else{__addEvent=function(_element,_type,_handler){_element.attachEvent("on"+_type,_handler)};__delEvent=function(_element,_type,_handler){_element.detachEvent("on"+_type,_handler)}}V._$addEvent=function(_element,_type,_handler,_capture){_element=E._$getElement(_element);if(!_element||!_type||!_handler){return}if(__isOnReadyStateChange(_element,_type)){_type="readystatechange";_handler=__onReadyStateChange._$bind(null,_handler)}if(B._$ISIE&&_type=="input"){_type="propertychange"}__addEvent(_element,_type,_handler,_capture);__cacheEvent(_element,_type,_handler)};P("J");var __parseDomain=function(_domain){return __regdomain.test(_domain)?RegExp.$1:""};var __parseWindowAndOrigin=function(_window,_origin){var _iframe;if(_window=="top"){return[top,document.referrer]}if(U._$isType(_window,"string")){_iframe=document.getElementById(_window);_window=!_iframe?window.frames[_window]:_iframe.contentWindow}if(!_window){return null}if(!_origin&&!!_iframe&&__reghost.test(_iframe.src)){_origin=RegExp.$1||""}if(!_origin&&__reghost.test(location.href)){_origin=RegExp.$1||""}if(!_origin){return null}return[_window,_origin]};if(!!window.postMessage){__postMessage=function(_window,_message,_origin){var _info=__parseWindowAndOrigin(_window,_origin);if(!!_info){_info[0].postMessage(_message,_info[1])}};__addMsgListener=function(_callback){V._$addEvent(window,"message",_callback)
}}else{var __cache={},__events=[];__postMessage=function(_window,_message,_origin){var _info=__parseWindowAndOrigin(_window,_origin);if(!_info){return}var _domain=__parseDomain(_info[1]);var _cache=__cache[_domain];if(!_cache){_cache=J._$registXMessage(_domain)}var _data={cb:_cache.cbs,msg:""+_message,tgt:_window,src:window!=top?window.name:"top"};_cache.div.innerHTML='<iframe name="'+U._$serialize(_data)+'" src="'+_cache.url+'"></iframe>'};__addMsgListener=function(_callback){if(!_callback){return}__events.push(_callback)};J.g=function(_event){for(var i=0,l=__events.length;i<l;__events[i](_event),i++){}}}J._$postMessage=__postMessage;J._$addMsgListener=__addMsgListener;J._$registXMessage=function(_domain,_listener){if(!!window.postMessage){return}var _dmn=__parseDomain(_domain);if(!!__cache[_dmn]){return}var _ntmp=document.createElement("div");_ntmp.style.display="none";document.body.appendChild(_ntmp);__cache[_dmn]={div:_ntmp,cbs:_listener||"J.g",url:_domain.toLowerCase().indexOf("http://")>=0?_domain:"http://"+_domain+"/proxy.html"};return __cache[_dmn]}})();(function(){var Cross=$.createClass("netease.mail.api.Cross");$.Object.extend(Cross,{toJsonString:fNeteaseMailApiToJsonString,registXMessage:fNeteaseMailApiRegistXMessage,addMsgListener:fNeteaseMailApiAddMsgListener,postMessage:fNeteaseMailApiPostMessage,callFunc:fNeteaseMailApiCallFunc,regAndListen:fNeteaseMailApiRegAndListen,initCross:fNeteaseMailApiCrossInit,call:{},_listened:{}});var sOriginHost="";function fNeteaseMailApiCrossInit(oParam){oParam=oParam||{};var sWmsvrHost=netease.mail.api.Core.$.Cookie.get("mail_host")||oParam.host;sOriginHost="http://"+sWmsvrHost;if(!oParam.proxy){if(sWmsvrHost){oParam.proxy="http://"+sWmsvrHost+"/app/h/proxy.htm"}}function _(){if(oParam.proxy){Cross.regAndListen(oParam.proxy,oParam.win||"parent")}}if(document.body){_()}else{if(window.addEventListener){window.addEventListener("load",_)}else{if(window.attachEvent){window.attachEvent("onload",_)}}}}function fNeteaseMailApiRegAndListen(b,a){Cross.registXMessage(b);Cross.addMsgListener(a)}function fNeteaseMailApiToJsonString(o,sType){var oChar={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':"\\"+'"',"\\":"\\"+"\\"},oStr={"array":_a,"boolean":_b,"null":_n,"number":_num,"object":_o,"string":_s};function _a(a){var aStr=["["],bFlag,func,i,l=a.length,o;for(i=0;i<l;i+=1){o=a[i];func=oStr[typeof o];if(func){o=func(o);if(typeof o=="string"){if(bFlag){aStr[aStr.length]=","}aStr[aStr.length]=o;bFlag=true}}}aStr[aStr.length]="]";return aStr.join("")}function _b(s){return String(s)}function _n(s){return"null"}function _num(s){return isFinite(s)?String(s):"null"}function _o(o){if(o){if(o instanceof Array){return oStr.array(o)}if(o instanceof Date){return"new Date("+o.valueOf()+")"}var aStr=["{"],bFlag,func,i,o;for(i in o){oTmp=o[i];func=oStr[typeof oTmp];if(func){oTmp=func(oTmp);if(typeof oTmp=="string"){if(bFlag){aStr[aStr.length]=","}aStr.push(oStr.string(i),":",oTmp);bFlag=true}}}aStr[aStr.length]="}";return aStr.join("")}return"null"}function _s(s){if(/["\\\x00-\x1f]/.test(s)){s=s.replace(/([\x00-\x1f\\"])/g,function(sKey,sTmp){var sChar=oChar[sTmp];if(sChar){return sChar}sChar=sTmp.charCodeAt();return"\\u00"+Math.floor(sChar/16).toString(16)+(sChar%16).toString(16)})}return'"'+s+'"'}if(typeof o=="object"){if(o){if(o.constructor==Array){return oStr.array(o)}else{if(o.constructor==Date){return"new Date("+o.valueOf()+")"}else{return oStr.object(o)}}}else{return oStr.object(o)}}else{return""}}function fNeteaseMailApiRegistXMessage(sUrl){J._$registXMessage(sUrl)}function fNeteaseMailApiAddMsgListener(sWin){var that=this;if(!Cross._listened[sWin]){Cross._listened[sWin]=true}else{return}J._$addMsgListener(function(o){if(o.origin&&!/(((^|\.)163\.com)|((^|\.)126\.com)|((^|\.)188\.com)|((^|\.)yeah\.net)|((^|\.)yixin\.im))$/.test(o.origin)){return}var bSuc=true;try{var oData=typeof o.data==="string"?JSON.parse(o.data):o.data;if(Object.prototype.toString.call(oData)!=="[object Object]"){return}}catch(e){try{var oData=JSON.parse(o.data.replace(/'/g,'"'))}catch(e){bSuc=false}}if(!bSuc){return}if(oData._win&&oData._win!=sWin){return}if(oData.xcall){for(var o in oData){if(oData[o]&&oData[o].isCallback&&!Cross.call[o]){Cross.call[o]=function(_o,sWin){return function(oParam){oParam={value:oParam};oParam.xcall=_o.name;that.postMessage(sWin,oParam)}}(oData[o],sWin)}if(oData[o]&&oData[o].isFunction){try{oData[o]=(function(oSrcData){return function(o){var fnName=oSrcData.func.match(/Cross\.call\.([0-9a-z_]+)/i)[1];netease.mail.api.Cross.call[fnName](o)}})(oData[o])}catch(e){}}}if(oData._callback){try{var xcallPath=oData.xcall.split(".");var xcallFn,xcallParent;for(var i=0;i<xcallPath.length;i++){if(i===xcallPath.length-1){xcallParent=xcallFn}xcallFn=xcallFn?xcallFn[xcallPath[i]]:window[xcallPath[i]];if(i===0&&!xcallFn.configure){return}}var oResult=xcallFn.call(xcallParent,oData);var oResultData={xcall:oData._callback.name,data:oResult};that.postMessage(sWin,oResultData)}catch(e){}}else{try{var xcallPath=oData.xcall.split(".");
var xcallFn,xcallParent;for(var i=0;i<xcallPath.length;i++){if(i===xcallPath.length-1){xcallParent=xcallFn}xcallFn=xcallFn?xcallFn[xcallPath[i]]:window[xcallPath[i]];if(i===0&&!xcallFn.configure){return}}xcallFn.call(xcallParent,oData)}catch(e){}}}})}function fNeteaseMailApiPostMessage(sWin,oData){if(!oData._win){oData._win=window.name}var sJson=this.toJsonString(oData);J._$postMessage(sWin,sJson,sOriginHost)}function fNeteaseMailApiCallFunc(sWin,sFunc,oData){oData.xcall=sFunc;this.postMessage(sWin,oData)}})();